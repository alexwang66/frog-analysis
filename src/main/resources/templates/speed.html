<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Download Speed Over Time</title>
    <!-- 引入 Semantic UI 样式表 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css">

    <!-- 引入 ECharts -->
    <script src="https://cdn.jsdelivr.net/npm/echarts/dist/echarts.min.js"></script>

    <!-- 引入 jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
<div class="ui container">
    <h2 class="ui header">Download Speed (MB per Second) Over Time</h2>

    <!-- 创建一个用于展示 ECharts 图表的 div -->
    <div id="downloadSpeedChart" style="width: 800px; height: 600px;"></div>

    <!-- 使用 Thymeleaf 渲染未转义的时间标签和每秒下载速度数据 -->
    <script type="text/javascript">
        $(document).ready(function() {
            // 初始化 ECharts 实例
            var downloadSpeedChart = echarts.init(document.getElementById('downloadSpeedChart'));

            // 指定图表的配置项和数据
            var option = {
                title: {
                    text: 'Download Speed (MB per Second) Over Time'
                },
                tooltip: {
                    trigger: 'axis',
                    axisPointer: {
                        type: 'line'
                    }
                },
                xAxis: {
                    type: 'category',
                    data: [(${timeLabelsForJs})],  // 时间标签
                    axisLabel: {
                        formatter: function (value) {
                            return echarts.format.formatTime('MM/dd hh:mm', value);  // 格式化时间
                        }
                    },
                    name: 'Time (Hours)'
                },
                yAxis: {
                    type: 'value',
                    axisLabel: {
                        formatter: function (value) {
                            return value + ' MB/s';  // 显示为 MB/s 单位
                        }
                    },
                    name: 'Download Speed (MB/s)'  // Y轴单位为 MB/s
                },
                series: [{
                    name: 'Download Speed (MB/s)',
                    type: 'line',
                    data: [(${downloadSpeeds})],  // 下载速度 (MB/s)
                    smooth: true,  // 平滑显示折线
                    itemStyle: {
                        color: 'rgba(75, 192, 192, 0.8)'
                    }
                }],
                toolbox: {
                    feature: {
                        restore: { // 添加重置按钮
                            title: 'Reset',
                            show: true
                        },
                        dataZoom: {
                            yAxisIndex: 'none' // 启用 x 轴缩放
                        }
                    }
                },
                dataZoom: [
                    {
                        type: 'slider', // x 轴滑动条组件
                        start: 0,
                        end: 100
                    },
                    {
                        type: 'inside', // 支持 x 轴鼠标滚动缩放
                        xAxisIndex: 0,
                        start: 0,
                        end: 100
                    }
                ]
            };

            // 使用刚指定的配置项和数据显示图表
            downloadSpeedChart.setOption(option);
        });
    </script>
</div>

<!-- 引入 Semantic UI 的 JS 库 -->
<script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.js"></script>
</body>
</html>
